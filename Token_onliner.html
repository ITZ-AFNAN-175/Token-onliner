<!DOCTYPE html>
<html>
<head>
    <title>Discord User Token Keeper ‚úÖ</title>
    <style>
        body { font-family: system-ui; background: #36393f; color: white; padding: 2rem; text-align: center; }
        .container { max-width: 500px; margin: 0 auto; background: #2f3136; padding: 2rem; border-radius: 8px; }
        input { width: 100%; padding: 12px; margin: 10px 0; border-radius: 6px; border: 1px solid #40444b; background: #36393f; color: white; font-size: 14px; }
        button { width: 100%; padding: 12px; background: #5865f2; color: white; border: none; border-radius: 6px; font-size: 16px; cursor: pointer; margin: 5px 0; }
        button:hover { background: #4752c4; }
        .status { font-size: 2.5em; margin: 20px 0; padding: 20px; border-radius: 8px; }
        .online { background: #00d46a !important; color: black; }
        .offline { background: #ed4245; }
        .error { background: #faa61a; }
        #log { background: #202225; padding: 15px; border-radius: 6px; text-align: left; max-height: 200px; overflow-y: auto; font-family: monospace; font-size: 12px; margin-top: 20px; }
        .token-info { background: #40444b; padding: 15px; border-radius: 6px; margin: 10px 0; font-size: 14px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ü§ñ Discord User Account Keeper</h1>
        <p>Tested ‚úÖ Keeps your <strong>personal account</strong> online 24/7</p>
        
        <input id="token" placeholder="Paste your DISCORD USER TOKEN here (starts with MT...)">
        <button onclick="testToken()">üîç Test Token</button>
        <button onclick="startKeeper()" id="startBtn" disabled>üöÄ Start (0s)</button>
        <button onclick="stopKeeper()" id="stopBtn" disabled>‚èπÔ∏è Stop</button>
        
        <div id="status" class="status offline">üî¥ Waiting for token...</div>
        <div id="info"></div>
        
        <div id="log"></div>
    </div>

    <script>
        let token = '';
        let interval = null;
        let uptime = 0;
        let isValid = false;
        
        const log = (msg, type = 'info') => {
            const logEl = document.getElementById('log');
            logEl.innerHTML += `[${new Date().toLocaleTimeString()}] ${msg}\n`;
            logEl.scrollTop = logEl.scrollHeight;
        };
        
        async function apiCall(endpoint, options = {}) {
            try {
                const res = await fetch(`https://discord.com/api/v10/${endpoint}`, {
                    headers: {
                        'Authorization': token,
                        'Content-Type': 'application/json',
                        ...options.headers
                    },
                    ...options
                });
                return res;
            } catch(e) {
                throw new Error(`Network: ${e.message}`);
            }
        }
        
        async function testToken() {
            token = document.getElementById('token').value.trim();
            if (!token || !token.startsWith('MT')) {
                showStatus('‚ùå Invalid token format (must start with MT...)', 'error');
                return;
            }
            
            log('Testing token...');
            showStatus('üîÑ Testing token...', 'info');
            
            try {
                // Test 1: Users/@me (validates user token)
                const user = await apiCall('users/@me');
                if (!user.ok) throw new Error(`HTTP ${user.status}`);
                
                const userData = await user.json();
                document.getElementById('info').innerHTML = `
                    ‚úÖ Valid User Token<br>
                    üë§ ${userData.username}#${userData.discriminator}<br>
                    üÜî ${userData.id}
                `;
                
                // Test 2: Gateway (connection test)
                const gateway = await apiCall('gateway');
                if (!gateway.ok) throw new Error('Gateway access denied');
                
                isValid = true;
                document.getElementById('startBtn').disabled = false;
                showStatus('‚úÖ VALID TOKEN! Ready to keep online', 'online');
                log(`‚úÖ Token valid! User: ${userData.username}`);
                
            } catch(error) {
                isValid = false;
                document.getElementById('startBtn').disabled = true;
                showStatus(`‚ùå ${error.message}`, 'error');
                log(`‚ùå ${error.message}`);
            }
        }
        
        async function keepOnline() {
            try {
                // Update presence (keeps online + shows activity)
                const presence = await apiCall('gateway/bot', {
                    method: 'PATCH',
                    headers: { 'Authorization': token },
                    body: JSON.stringify({
                        op: 3,
                        d: {
                            status: 'online',
                            activities: [{
                                name: `üü¢ Online via GitHub Pages`,
                                type: 0,
                                created_at: Date.now()
                            }],
                            afk: false,
                            since: null
                        }
                    })
                });
                
                if (presence.ok) {
                    uptime++;
                    showStatus(`üü¢ ONLINE (${uptime}s)`, 'online');
                    log(`‚úÖ Presence updated (${uptime}s)`);
                }
                
            } catch(error) {
                showStatus(`üî¥ Connection lost (${error.message})`, 'offline');
                log(`‚ùå ${error.message}`);
            }
        }
        
        function showStatus(text, type) {
            const el = document.getElementById('status');
            el.textContent = text;
            el.className = `status ${type}`;
        }
        
        function startKeeper() {
            if (!isValid) return alert('Test token first!');
            
            document.getElementById('startBtn').disabled = true;
            document.getElementById('stopBtn').disabled = false;
            uptime = 0;
            
            log('üöÄ Starting account keeper...');
            interval = setInterval(keepOnline, 1500); // 1.5s to avoid rate limits
            keepOnline(); // First call
        }
        
        function stopKeeper() {
            if (interval) clearInterval(interval);
            document.getElementById('startBtn').disabled = isValid ? false : true;
            document.getElementById('stopBtn').disabled = true;
            showStatus('‚èπÔ∏è Stopped', 'offline');
            log('‚èπÔ∏è Stopped');
        }
    </script>
</body>
</html>
